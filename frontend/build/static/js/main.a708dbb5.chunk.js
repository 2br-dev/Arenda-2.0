(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAAg0lEQVR4AWOgDfhv9H/f/wNAuO+/NjZph//YgAOqIoX/DVigArpZCUBrUGECpoUNGJY14FL0EUx+wqMIaIXo/xtAKPr/CG5FF/8L/Jf9L/VfGMjCY91qMHstPusuAs2QBUJ8JgFdIgJ10zHCvvuIy7ocjHDKwVTE+X8lcngDeZzUT0IAkxfptgF8c5sAAAAASUVORK5CYII="},147:function(e,t,a){e.exports=a.p+"static/media/wall.842dbec1.jpg"},160:function(e,t,a){e.exports=a(357)},165:function(e,t,a){},167:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},179:function(e,t,a){},352:function(e,t,a){},354:function(e,t,a){},357:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),o=a.n(l),c=(a(165),a(14)),i=a(15),s=a(20),u=a(18),m=a(19),d=a(359),p=a(361),h=a(360),f=a(6),g=a(12),b=a(358),E=(a(167),a(13));function v(){var e=Object(g.a)(["\n  a {\n    color: #fff;\n  }\n  background: #000;\n"]);return v=function(){return e},e}var y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/user/logout.php")).then(function(){return window.location.href="/login"}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("header",null,r.a.createElement("input",{type:"checkbox",className:"hamburger",id:"hamburger"}),r.a.createElement("label",{htmlFor:"hamburger",className:"icon"}),r.a.createElement("nav",{role:"navigation"},r.a.createElement("ul",null,"/account"!==window.location.pathname?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(b.a,{to:"/data",onClick:function(){return e.props.handleChangeUrl("data")}},"\u0414\u0430\u043d\u043d\u044b\u0435")),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/reestr",onClick:function(){return e.props.handleChangeUrl("reestr")}},"\u0420\u0435\u0435\u0441\u0442\u0440 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u043e\u0432")),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/bills",onClick:function(){return e.props.handleChangeUrl("bills")}},"\u0412\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0447\u0435\u0442\u043e\u0432")),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/print",onClick:function(){return e.props.handleChangeUrl("print")}},"\u041f\u0435\u0447\u0430\u0442\u044c \u0441\u0447\u0435\u0442\u043e\u0432")),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/payments",onClick:function(){return e.props.handleChangeUrl("payments")}},"\u041e\u043f\u043b\u0430\u0442\u044b")),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/history",onClick:function(){return e.props.handleChangeUrl("history")}},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f")),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/stats",onClick:function(){return e.props.handleChangeUrl("stats")}},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"))):null,r.a.createElement(w,null,r.a.createElement(b.a,{to:"",onClick:this.logout.bind(this)},"\u0412\u044b\u0439\u0442\u0438")))))}}]),t}(n.Component),w=E.a.li(v()),k=a(26),O=a.n(k),C=a(34),x=a(36),j=a(4),_=a.n(j),S=(a(175),function(){return r.a.createElement("div",{className:"loader"})}),N=function(){function e(){Object(c.a)(this,e),this.toPrice=function(e){return"".concat(Number(e).toFixed(2)," \u20bd")}}return Object(i.a)(e,[{key:"hideRenters",value:function(){"/reestr"===window.location.pathname&&_()(".renter").each(function(){_()(this).children(".renter-contract").length>0||_()(this).hide()})}},{key:"getNumberOfMonth",value:function(e){var t="00";switch(e){case"\u042f\u043d\u0432\u0430\u0440\u044c":t="01";break;case"\u0424\u0435\u0432\u0440\u0430\u043b\u044c":t="02";break;case"\u041c\u0430\u0440\u0442":t="03";break;case"\u0410\u043f\u0440\u0435\u043b\u044c":t="04";break;case"\u041c\u0430\u0439":t="05";break;case"\u0418\u044e\u043d\u044c":t="06";break;case"\u0418\u044e\u043b\u044c":t="07";break;case"\u0410\u0432\u0433\u0443\u0441\u0442":t="08";break;case"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c":t="09";break;case"\u041e\u043a\u0442\u044f\u0431\u0440\u044c":t="10";break;case"\u041d\u043e\u044f\u0431\u0440\u044c":t="11";break;case"\u0414\u0435\u043a\u0430\u0431\u0440\u044c":t="12"}return t}},{key:"getStringOfMonth",value:function(e){var t="00";switch("number"===typeof e&&e<10&&(e="0"+e),e){case"01":t="\u042f\u043d\u0432\u0430\u0440\u044c";break;case"02":t="\u0424\u0435\u0432\u0440\u0430\u043b\u044c";break;case"03":t="\u041c\u0430\u0440\u0442";break;case"04":t="\u0410\u043f\u0440\u0435\u043b\u044c";break;case"05":t="\u041c\u0430\u0439";break;case"06":t="\u0418\u044e\u043d\u044c";break;case"07":t="\u0418\u044e\u043b\u044c";break;case"08":t="\u0410\u0432\u0433\u0443\u0441\u0442";break;case"09":t="\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c";break;case"10":t="\u041e\u043a\u0442\u044f\u0431\u0440\u044c";break;case"11":t="\u041d\u043e\u044f\u0431\u0440\u044c";break;case"12":t="\u0414\u0435\u043a\u0430\u0431\u0440\u044c"}return t}},{key:"setCookie",value:function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}},{key:"checkCookie",value:function(){var e=this.getCookie("username");""!==e?alert("Welcome again "+e):""!==(e=prompt("Please enter your name:",""))&&null!=e&&this.setCookie("username",e,365)}}]),e}();function T(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  padding: 0 10px;\n  :hover {\n    background: lightblue;\n    transition: .37s ease;\n  }\n  div {\n    padding: 0 10px;\n  }\n  p {\n    font-size: 14px;\n    pointer-events: none;\n  }\n"]);return T=function(){return e},e}function R(){var e=Object(g.a)(["\n  p {\n    text-align: left;\n    font-size: 12px;\n    line-height: 7px;\n  }\n"]);return R=function(){return e},e}function F(){var e=Object(g.a)(["\n  p {\n    text-align: left;\n    font-size: 14px;\n    line-height: 7px;\n  }\n"]);return F=function(){return e},e}function I(){var e=Object(g.a)(["\n  width: 700px;\n  margin: 0 auto;\n  text-align: center;\n  h2 {\n    font-size: 18px;\n    padding: 10px 0;\n    margin: 0;\n    cursor: pointer;\n    border-bottom: 1px solid #2323;\n    :hover {\n      background: lightblue;\n      transition: .37s ease;\n    }\n  }\n"]);return I=function(){return e},e}var A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggleRenterDetails=function(e){return _()(e.target).siblings(".renter-details").slideToggle()},a.toggleContractDetails=function(e){return _()(e.target).siblings(".details").slideToggle()},a.state={visible:1,loading:!0},a.getRenters=a.getRenters.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(O.a.mark(function e(){var t,a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,this.setState({loading:!0}),e.next=4,fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/contract/checkstatus.php")).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)});case 4:return e.next=6,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/renters/read.php"),type:"POST",success:function(e){t.props.getRenters(e)},error:function(e){console.log(e)}});case 6:return(a=new FormData).append("visible",this.state.visible),e.next=10,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/contract/read.php"),data:a,processData:!1,contentType:!1,type:"POST",success:function(e){t.props.getContracts(e)},error:function(e){console.log(e)}});case 10:return e.next=12,t.setState({loading:!1}),void(new N).hideRenters();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRenters",value:function(){var e=Object(C.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this,this.setState({loading:!0}),1===this.state.visible?this.setState({visible:0}):this.setState({visible:1}),e.next=6,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/renters/read.php"),type:"POST",success:function(e){a.props.getRenters(e)},error:function(e){console.log(e)}});case 6:return(n=new FormData).append("visible",this.state.visible),e.next=10,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/contract/read.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){a.props.getContracts(e)},error:function(e){console.log(e)}});case 10:return e.next=12,a.setState({loading:!1}),void(new N).hideRenters();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.testStore,a=this.state,n=a.visible,l=a.loading;return r.a.createElement("div",{className:"container"},l?r.a.createElement(S,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("button",{onClick:this.getRenters,className:"btn",style:{marginBottom:"30px"},id:"showAllbtn"},n?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435\u0445 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u043e\u0432":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430\u043c\u0438")),t.renters.map(function(a,n){return r.a.createElement(D,{key:"renter-".concat(n),onClick:e.toggleRenterDetails,className:"renter"},r.a.createElement("h2",null,a.short_name," \u2014 \u0411\u0430\u043b\u0430\u043d\u0441:",a.balance>=0?r.a.createElement("span",{style:{color:"green"}}," ",a.balance," \u20bd "):r.a.createElement("span",{style:{color:"red"}}," ",a.balance," \u20bd")),r.a.createElement(M,{style:{display:"none"},className:"renter-details"},r.a.createElement("p",null,r.a.createElement("b",null,"\u0418\u041d\u041d:")," ",a.inn," / ",r.a.createElement("b",null,"\u041a\u041f\u041f:")," ",a.kpp),r.a.createElement("p",null,r.a.createElement("b",null,"\u041e\u0413\u0420\u041d/\u041e\u0413\u0420\u041d\u0418\u041f:")," ",a.ogrn),r.a.createElement("p",null,r.a.createElement("b",null,"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441:")," ",a.uridich_address),r.a.createElement("p",null,r.a.createElement("b",null,"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441:")," ",a.post_adress),r.a.createElement("p",null,r.a.createElement("b",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:")," ",a.phone),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail:")," ",a.email),r.a.createElement("p",null,r.a.createElement("b",null,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430:")," ",a.bank_name),r.a.createElement("p",null,r.a.createElement("b",null,"\u0411\u0418\u041a:")," ",a.bank_bik),r.a.createElement("p",null,r.a.createElement("b",null,"\u041a\u043e\u0440. \u0441\u0447\u0435\u0442:")," ",a.bank_ks),r.a.createElement("p",null,r.a.createElement("b",null,"\u0420\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442:")," ",a.bank_rs)),t.contracts.map(function(t,n){if(t.renter_id===a.id)return r.a.createElement(P,{"data-status":t.status,key:"contract-".concat(n),className:"renter-contract"},r.a.createElement(B,{onClick:e.toggleContractDetails},""!==t.end_date?r.a.createElement("p",null,t.contract_number," \u043e\u0442 ",t.datetime):r.a.createElement("p",null,t.contract_number," \u043e\u0442 ",t.datetime," ",r.a.createElement("i",null,"(\u0431\u0435\u0437\u0441\u0440\u043e\u0447\u043d\u043e)")),"0"===t.status?r.a.createElement("span",{style:{color:"red"}},"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0439"):"0.5"===t.status?r.a.createElement("span",{style:{color:"orange"}},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d \u0434\u043e: ",t.end_date):r.a.createElement("span",{style:{color:"green"}},"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439")),r.a.createElement("div",{style:{display:"none"},className:"details"},r.a.createElement("p",null,r.a.createElement("b",null,"\u041f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435:")," ",t.room_number),r.a.createElement("p",null,r.a.createElement("b",null,"\u041d\u043e\u043c\u0435\u0440 \u043d\u0430 \u0441\u0445\u0435\u043c\u0435:")," ",t.number_scheme),r.a.createElement("p",null,r.a.createElement("b",null,"\u041f\u043b\u043e\u0449\u0430\u0434\u044c:")," ",t.square),r.a.createElement("p",null,r.a.createElement("b",null,"\u0421\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:")," ",t.summa),r.a.createElement("p",null,r.a.createElement("b",null,"\u0421\u0443\u043c\u043c\u0430 \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439:")," ",t.discoint),r.a.createElement("p",null,r.a.createElement("b",null,"\u0421\u0440\u043e\u043a \u0410\u0440\u0435\u043d\u0434\u044b:")," \u0441 ",t.start_date," \u043f\u043e ",t.end_date),r.a.createElement("p",null,r.a.createElement("b",null,"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u043d\u0438:")," ",t.peni),r.a.createElement("p",null,r.a.createElement("b",null,"\u0410\u0440\u0435\u043d\u0434\u0430 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0435\u0442\u0441\u044f \u0441:")," ",t.start_date)))}))})))}}]),t}(n.Component),D=E.a.div(I()),M=E.a.div(F()),P=E.a.div(R()),B=E.a.div(T()),L=Object(x.b)(function(e){return{testStore:e}},function(e){return{getContracts:function(t){e({type:"FETCH_CONTRACTS",payload:t})},getRenters:function(t){e({type:"FETCH_RENTERS",payload:t})},getRooms:function(t){e({type:"FETCH_ROOMS",payload:t})}}})(A),H=(a(177),a(179),function(e){return r.a.createElement(r.a.Fragment,null,e.visible?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"modal",className:"modal bounceInDown animated"},r.a.createElement("button",{className:"close",onClick:e.toggleModal}),r.a.createElement("p",null,e.text)),r.a.createElement("div",{className:"black-wrapper",onClick:e.toggleModal})):null)}),V=a(44),U=a.n(V);function Y(){var e=Object(g.a)(["\n  margin-bottom: 5px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  p {\n    font-size: 14px;\n    margin: 0;\n    margin-right: 10px;\n  }\n\n  input {\n    width: 100px;\n  }\n\n  div {\n    display: flex;\n    align-items: center;\n  }\n"]);return Y=function(){return e},e}function z(){var e=Object(g.a)(["\n  width: 800px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  input[type='number'] {\n    margin-left: 10px;\n    width: 50px;\n    text-align: center;\n  }\n"]);return z=function(){return e},e}function W(){var e=Object(g.a)(["\n  width: 800px;\n  margin: 0 auto;\n"]);return W=function(){return e},e}function G(){var e=Object(g.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return G=function(){return e},e}function X(){var e=Object(g.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return X=function(){return e},e}function J(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  p {\n    font-weight: bold;\n    margin-right: 15px;\n  }\n"]);return J=function(){return e},e}var q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggleModal=function(){return a.setState({modal:!1,modalText:""})},a.handleChangeFromFirstValue=function(e){return a.setState({fromFirstValue:e.target.value})},a.setTodayDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1;return t<10&&(t="0"+t),a<10&&(a="0"+a),e.getFullYear()+"-"+a+"-"+t},a.handleCheck=function(e){var t=_()(e.target).data("id");_()(e.target).prop("checked")?_()("input[name='period_sum'][data-id=".concat(t,"]")).prop("disabled",!1):_()("input[name='period_sum'][data-id=".concat(t,"]")).prop("disabled",!0)},a.showInactive=function(){return a.setState({showInactive:!a.state.showInactive})},a.state={fromFirstValue:1,today:a.setTodayDate(),loading:!0,modal:!1,modalText:"",showInactive:!1},a.openModal=a.openModal.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/contract/read_all.php")).then(function(e){return e.json()}).then(function(t){return e.props.getContracts(t)}).then(function(){return e.setState({loading:!1})})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this,a=[],n=[],r=[],l=0;t.setState({modal:!1}),_()("input[name='renter']:checked").each(function(){a.push(_()(this).val()),n.push(_()(this).data("id")),r.push(_()(this).data("sum"))});var o=[];_()("input[name='period_sum']:enabled").each(function(){""===_()(this).val()?o.push(0):(r[l]=_()(this).val(),o.push(1)),l++}),r=r.map(function(e){return parseFloat(e.replace(/,/g,".")).toFixed(2)});var c={year:_()("input[name='year']:checked").val(),month:_()("input[name='month']:checked").val(),renter:a,from_first:_()("input[name='from_first']:checked").val(),from_first_number:_()("input[type='number']").val(),date:_()("input[name='date']").val(),summa_id:n,period_sum:r,modified:o};console.log(c),c.month&&c.year&&0!==c.renter.length?(_()("input[name='period_sum']").prop("disabled",!0),_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/actions/vystavlenie_scheta.php"),data:c,success:function(e){1===e.result?(_()("#vystavlenie-schetov").trigger("reset"),t.openModal("\u0421\u0447\u0451\u0442 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")):t.openModal("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.")},error:function(e){console.log(e)}})):t.openModal("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f")}},{key:"openModal",value:function(e){this.setState({modal:!0,modalText:e})}},{key:"createRadio",value:function(e,t){return r.a.createElement("label",{className:"container-radio"},e,r.a.createElement("input",{name:t,type:"radio",value:e}),r.a.createElement("span",{className:"checkmark"}))}},{key:"createCheckbox",value:function(e,t,a,n,l,o){return r.a.createElement(te,{key:o},r.a.createElement("label",{className:"container-checkbox"},r.a.createElement("b",null,e)," - ",t,r.a.createElement("input",{type:"checkbox",name:"renter","data-sum":a,"data-id":n,value:l,onClick:this.handleCheck}),r.a.createElement("span",{className:"checkmark"})),r.a.createElement("div",null,r.a.createElement("p",null,"\u041f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443: ",r.a.createElement("b",null,a,"\u20bd")),r.a.createElement("input",{type:"text","data-id":n,disabled:!0,name:"period_sum"})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.fromFirstValue,n=t.loading;return r.a.createElement("div",{className:"container"},n?r.a.createElement(S,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null,r.a.createElement("p",{className:"date-error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443:"),r.a.createElement("input",{type:"date",name:"date",value:this.state.today,id:"date",onChange:function(t){return e.setState({today:t.target.value})}})),r.a.createElement("hr",null),r.a.createElement($,{onSubmit:this.hadleSubmit,id:"vystavlenie-schetov",method:"POST",action:""},r.a.createElement("p",{className:"error renter-error"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440:")),this.props.testStore.contracts.map(function(t,a){if(parseInt(t.status))return e.createCheckbox(t.short_name,t.contract_number,t.summa,t.contract_id,t.renter_id,a)}),r.a.createElement(U.a,{variant:"contained",onClick:this.showInactive,style:{background:"#000",color:"#fff",margin:"15px 0 10px"}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441 \u043d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430\u043c\u0438"),this.props.testStore.contracts.map(function(t,a){if(!parseInt(t.status)&&e.state.showInactive)return e.createCheckbox(t.short_name,t.contract_number,t.summa,t.contract_id,t.renter_id,a)}),r.a.createElement("hr",null),r.a.createElement("span",{className:"error year-error"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434:")),r.a.createElement(Q,null,this.createRadio("2016","year"),this.createRadio("2017","year"),this.createRadio("2018","year"),this.createRadio("2019","year"),this.createRadio("2020","year")),r.a.createElement("hr",null),r.a.createElement("span",{className:"error month-error"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u044f\u0446:")),r.a.createElement(Z,null,r.a.createElement("span",null,this.createRadio("\u042f\u043d\u0432\u0430\u0440\u044c","month"),this.createRadio("\u0424\u0435\u0432\u0440\u0430\u043b\u044c","month"),this.createRadio("\u041c\u0430\u0440\u0442","month")),r.a.createElement("span",null,this.createRadio("\u0410\u043f\u0440\u0435\u043b\u044c","month"),this.createRadio("\u041c\u0430\u0439","month"),this.createRadio("\u0418\u044e\u043d\u044c","month")),r.a.createElement("span",null,this.createRadio("\u0418\u044e\u043b\u044c","month"),this.createRadio("\u0410\u0432\u0433\u0443\u0441\u0442","month"),this.createRadio("\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","month")),r.a.createElement("span",null,this.createRadio("\u041e\u043a\u0442\u044f\u0431\u0440\u044c","month"),this.createRadio("\u041d\u043e\u044f\u0431\u0440\u044c","month"),this.createRadio("\u0414\u0435\u043a\u0430\u0431\u0440\u044c","month"))),r.a.createElement("hr",null),r.a.createElement(ee,null,r.a.createElement("label",{className:"container-checkbox"},r.a.createElement("strong",null,"\u041d\u0430\u0447\u0430\u0442\u044c \u043d\u0443\u043c\u0435\u0440\u0430\u0446\u0438\u044e \u0441"),r.a.createElement("input",{type:"checkbox",name:"from_first"}),r.a.createElement("span",{className:"checkmark"})),r.a.createElement("input",{name:"from_first_number",type:"number",value:a,onChange:this.handleChangeFromFirstValue}))),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn",type:"submit",onClick:this.handleSubmit},"\u0412\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442")),this.state.modal?r.a.createElement(H,{text:this.state.modalText,visible:this.state.modal,toggleModal:this.toggleModal}):null)}}]),t}(n.Component),K=E.a.div(J()),Q=E.a.div(X()),Z=E.a.div(G()),$=E.a.form(W()),ee=E.a.div(z()),te=E.a.div(Y()),ae=Object(x.b)(function(e){return{testStore:e}},function(e){return{getContracts:function(t){e({type:"FETCH_ALL_CONTRACTS",payload:t})}}})(q),ne=a(145),re=a.n(ne);function le(){var e=Object(g.a)(["\n  a {\n    margin-right: 25px;\n  }\n"]);return le=function(){return e},e}function oe(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  span {\n    display: flex;\n    align-items: center;\n    img {\n      margin-left: 10px;\n    }\n  }\n\n  .btn {\n    text-transform: capitalize;\n    margin: unset;\n    padding: 7px 25px 10px;\n  }\n"]);return oe=function(){return e},e}function ce(){var e=Object(g.a)(["\n  color: #fff;\n  background: #232323;\n  border: 0;\n  padding: 10px 20px;\n  border-radius: 10px;\n  margin-bottom: 15px;\n  width: 300px;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  top: 50px;\n"]);return ce=function(){return e},e}function ie(){var e=Object(g.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return ie=function(){return e},e}function se(){var e=Object(g.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return se=function(){return e},e}function ue(){var e=Object(g.a)(["\n  margin-bottom: 5px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  p {\n    font-size: 14px;\n    margin: 0;\n    margin-right: 10px;\n  }\n\n  input {\n    width: 100px;\n  }\n\n  div {\n    display: flex;\n    align-items: center;\n  }\n"]);return ue=function(){return e},e}var me=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.setState({modal:!1});var t=a.state,n=t.selectedRenter,r=t.selectedMonth,l=t.selectedYear,o=Object(f.a)(Object(f.a)(a)),c={year:l,month:(new N).getNumberOfMonth(r),renter:n};c.year?_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/invoice/read.php"),data:c,success:function(e){1===e.result?(_()("#pechat-schetov").trigger("reset"),o.setState({selectedMonth:"",selectedYear:""}),o.props.getInvoices(e.invoices),0===e.invoices.length&&o.openModal("\u041d\u0435\u0442 \u0441\u0447\u0435\u0442\u043e\u0432 \u0437\u0430 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434.")):o.openModal("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.")},error:function(e){console.log(e)}}):o.openModal("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434")},a.toggleModal=function(){return a.setState({modal:!1,modalText:""})},a.selectRenter=function(e){return a.setState({selectedRenter:e.target.value})},a.handleSelectMonth=function(e){return a.setState({selectedMonth:e.target.value})},a.handleSelectYear=function(e){return a.setState({selectedYear:e.target.value})},a.state={loading:!0,selectedRenter:"",selectedMonth:"",selectedYear:"",modal:!1,modalText:""},a.openModal=a.openModal.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a.handleDelete=a.handleDelete.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(O.a.mark(function e(){var t=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/actions/give_id.php")).then(function(e){return e.json()});case 2:return e.next=4,fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/renters/read.php")).then(function(e){return e.json()}).then(function(e){return t.props.getRenters(e)}).then(function(){return t.setState({loading:!1})});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(e){var t=this,a=e.target.dataset.invoice;_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/invoice/delete.php"),data:{invoice_id:e.target.dataset.invoice,contract:e.target.dataset.contract},success:function(e){console.log(e),t.props.filterInvoices(t.props.testStore.invoices.filter(function(e){return e.invoice_number!==a}))},error:function(e){console.log(e)}})}},{key:"openModal",value:function(e){this.setState({modal:!0,modalText:e})}},{key:"createRadio",value:function(e,t){return r.a.createElement("label",{className:"container-radio"},e,r.a.createElement("input",{name:t,type:"radio",value:e,onClick:"year"===t?this.handleSelectYear:this.handleSelectMonth}),r.a.createElement("span",{className:"checkmark"}))}},{key:"createCheckbox",value:function(e,t,a,n,l,o){return r.a.createElement(de,{key:o},r.a.createElement("label",{className:"container-checkbox"},r.a.createElement("b",null,e)," - ",t,r.a.createElement("input",{type:"checkbox",name:"renter","data-sum":a,"data-id":n,value:l,onClick:this.handleCheck}),r.a.createElement("span",{className:"checkmark"})),r.a.createElement("div",null,r.a.createElement("p",null,"\u041f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443: ",r.a.createElement("b",null,a,"\u20bd")),r.a.createElement("input",{type:"text","data-id":n,disabled:!0,name:"period_sum"})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.selectedRenter,l=this.props.testStore,o=new N;return r.a.createElement("section",{className:"container",style:{width:"800px",paddingTop:"100px"}},a?r.a.createElement(S,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,{name:"selected-renter",onChange:this.selectRenter},r.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:n},"\u0412\u0441\u0435 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u044b"),""!==n?r.a.createElement("option",{value:"0"},"\u0412\u0441\u0435 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u044b"):null,l.renters.map(function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.short_name)})),r.a.createElement("hr",null),r.a.createElement("form",{id:"pechat-schetov",action:"",method:"post",onSubmit:this.handleSubmit,style:{marginBottom:"50px"}},r.a.createElement("p",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434:"),r.a.createElement(pe,null,this.createRadio("2016","year"),this.createRadio("2017","year"),this.createRadio("2018","year"),this.createRadio("2019","year"),this.createRadio("2020","year")),r.a.createElement("hr",null),r.a.createElement("p",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u044f\u0446:"),r.a.createElement(he,null,r.a.createElement("span",null,this.createRadio("\u042f\u043d\u0432\u0430\u0440\u044c","month"),this.createRadio("\u0424\u0435\u0432\u0440\u0430\u043b\u044c","month"),this.createRadio("\u041c\u0430\u0440\u0442","month")),r.a.createElement("span",null,this.createRadio("\u0410\u043f\u0440\u0435\u043b\u044c","month"),this.createRadio("\u041c\u0430\u0439","month"),this.createRadio("\u0418\u044e\u043d\u044c","month")),r.a.createElement("span",null,this.createRadio("\u0418\u044e\u043b\u044c","month"),this.createRadio("\u0410\u0432\u0433\u0443\u0441\u0442","month"),this.createRadio("\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","month")),r.a.createElement("span",null,this.createRadio("\u041e\u043a\u0442\u044f\u0431\u0440\u044c","month"),this.createRadio("\u041d\u043e\u044f\u0431\u0440\u044c","month"),this.createRadio("\u0414\u0435\u043a\u0430\u0431\u0440\u044c","month"))),r.a.createElement("hr",null),r.a.createElement("input",{type:"submit",value:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",className:"btn"})),l.invoices.map(function(t,a){return r.a.createElement("div",{key:a,style:{marginBottom:"30px"}},r.a.createElement(ge,null,r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"0"}},r.a.createElement("b",null,t.renter)),r.a.createElement("span",{style:{margin:"0"}},"\u2116 \u0441\u0447\u0451\u0442\u0430:",r.a.createElement("b",{className:"ml5"},t.invoice_number),", \u043d\u0430 \u0441\u0443\u043c\u043c\u0443:",r.a.createElement("b",{className:"ml5"},t.summa,"\u20bd"),", \u0437\u0430: ",r.a.createElement("b",{className:"ml5"},o.getStringOfMonth(t.period_month),", ",t.period_year," "),"1"===t.modified?r.a.createElement("p",{className:"ml5",style:{color:"cornflowerblue"}}," (\u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d)"):null)),r.a.createElement("span",{onClick:e.handleDelete,className:"btn","data-invoice":t.invoice_number,"data-contract":t.contract_id},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c",r.a.createElement("img",{src:re.a,alt:""}))),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null,r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sch&pr=0&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=akt&pr=0&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0410\u043a\u0442"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sf&pr=0&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430")),r.a.createElement(be,null,r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sch&pr=1&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=akt&pr=1&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0410\u043a\u0442+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sf&pr=1&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430+\u043f\u0435\u0447\u0430\u0442\u044c"))),r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null,r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sch&pr=0&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442 (\u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439)"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=akt&pr=0&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0410\u043a\u0442 (\u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439)"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sf&pr=0&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430 (\u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439)")),r.a.createElement(be,null,r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sch&pr=1&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442 (\u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439)+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=akt&pr=1&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0410\u043a\u0442 (\u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439)+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(t.invoice_number,"&ind=sf&pr=1&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430 (\u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439)+\u043f\u0435\u0447\u0430\u0442\u044c")))))})),this.state.modal?r.a.createElement(H,{text:this.state.modalText,visible:this.state.modal,toggleModal:this.toggleModal}):null)}}]),t}(n.Component),de=E.a.div(ue()),pe=E.a.div(se()),he=E.a.div(ie()),fe=E.a.select(ce()),ge=E.a.div(oe()),be=E.a.div(le()),Ee=Object(x.b)(function(e){return{testStore:e}},function(e){return{getInvoices:function(t){e({type:"FETCH_ALL_INVOICES",payload:t})},getRenters:function(t){e({type:"FETCH_ALL_RENTERS",payload:t})},filterInvoices:function(t){e({type:"DELETE_INVOICE",payload:t})}}})(me),ve=a(24),ye=a(90),we=a(84),ke=a.n(we),Oe=a(79),Ce=a.n(Oe),xe=a(81),je=a.n(xe),_e=a(82),Se=a.n(_e),Ne=a(86),Te=a.n(Ne),Re=a(83),Fe=a.n(Re),Ie=a(146),Ae=a.n(Ie),De=a(85),Me=a.n(De),Pe=a(7),Be=a.n(Pe),Le=a(64),He=a.n(Le),Ve=a(63),Ue=a.n(Ve),Ye=a(80),ze=a.n(Ye),We=a(25);function Ge(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  label {\n    text-align: left;\n  }\n  input {\n    width: 70%;\n    background: #fff;\n  }\n  margin-bottom: 10px;\n"]);return Ge=function(){return e},e}function Xe(){var e=Object(g.a)(["\n  margin-top: 125px;\n  text-align: center;\n  b {\n    font-size: 1.13em;\n  }\n  .btn {\n    margin-top: 30px;\n  }\n"]);return Xe=function(){return e},e}function Je(){var e=Object(g.a)(["\n  color: #fff;\n  background: #232323;\n  border: 0;\n  padding: 10px 20px;\n  border-radius: 10px;\n  margin-bottom: 15px;\n  width: 300px;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  top: 50px;\n"]);return Je=function(){return e},e}var qe={success:Ce.a,warning:ze.a,error:je.a,info:Se.a};var Ke=Object(We.withStyles)(function(e){return{success:{backgroundColor:Fe.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:Ae.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,l=e.onClose,o=e.variant,c=Object(ye.a)(e,["classes","className","message","onClose","variant"]),i=qe[o];return r.a.createElement(Ue.a,Object.assign({className:Be()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(i,{className:Be()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Me.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:l},r.a.createElement(Te.a,{className:t.icon}))]},c))}),Qe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.fetchData()},a.fetchData=function(){fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/renters/read.php")).then(function(e){return e.json()}).then(function(e){return a.props.getRenters(e)}).then(function(){return a.setState({loading:!1})}).catch(function(e){return console.log(e)})},a.fetchContracts=function(){var e=Object(f.a)(Object(f.a)(a));_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/contract/read_one.php"),data:{id:e.state.selectedRenter},success:function(t){e.props.getContracts(t)}})},a.handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(Object(f.a)(a)),n=a.state,r=n.summa,l=n.date,o=n.number,c=n.selectedRenter,i=n.selectedContract,s=a.props.testStore;if(r&&l&&o&&c&&i){var u={summa:parseFloat(r.replace(/,/g,".")).toFixed(2),date:l,number:o,renter_id:c,renter_name:s.renters.find(function(e){return e.id===c}).full_name,renter_document:s.contracts.find(function(e){return e.id===i}).number,contract_id:i};console.log(u),_.a.ajax({type:"POST",data:u,url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/actions/payment.php"),success:function(e){console.log(e),1===e.result&&(t.setState({warning:!1,open:!0,success:!0,summa:null}),t.fetchData(),t.fetchContracts(),_()("#payments").trigger("reset")),e.payed&&t.setState({success:!1,open:!0,warning:!0})},error:function(e){console.log(e)}})}else t.openModal("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f")},a.sortNumber=function(e,t){return e-t},a.selectRenter=function(e){""!==a.state.selectedRenter&&(a.setState({selectedContract:""}),a.props.clearContracts(),a.props.clearInvoices()),e.preventDefault();var t=Object(f.a)(Object(f.a)(a)),n=e.target;_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/contract/read_one.php"),data:{id:n.value},success:function(e){t.setState({selectedRenter:n.value}),t.props.getContracts(e)},error:function(e){console.log(e)}})},a.selectContract=function(e){e.preventDefault();var t=Object(f.a)(Object(f.a)(a)),n=e.target;_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/invoice/read_by_contract.php"),data:{id:n.value},success:function(e){t.setState({selectedContract:n.value}),t.props.getInvoices(e),0===e.length&&t.openModal("\u041d\u0435\u0442 \u0441\u0447\u0435\u0442\u043e\u0432 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443")},error:function(e){console.log(e)}})},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({open:!1,success:!1,warning:!1})},a.setToday=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1;return t<10&&(t="0"+t),a<10&&(a="0"+a),e.getFullYear()+"-"+a+"-"+t},a.toggleModal=function(){return a.setState({modal:!1,modalText:""})},a.state={loading:!1,modal:!1,date:a.setToday(),summa:0,number:0,selectedRenter:"",selectedContract:"",modalText:"",open:!1},a.setToday=a.setToday.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"openModal",value:function(e){this.setState({modal:!0,modalText:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.date,n=t.loading,l=t.selectedRenter,o=t.selectedContract,c=t.warning,i=t.success,s=(t.modal,t.open),u=this.props.classes,m=this.props.testStore;return r.a.createElement("section",{className:"container",style:{width:"600px"}},c&&s?r.a.createElement(He.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:s,autoHideDuration:5e3,onClose:this.handleClose},r.a.createElement(Ke,{onClose:this.handleClose,variant:"error",className:u.margin,message:"\u0422\u0430\u043a\u0430\u044f \u043e\u043f\u043b\u0430\u0442\u0430 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445."})):null,i&&s?r.a.createElement(He.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:s,autoHideDuration:5e3,onClose:this.handleClose},r.a.createElement(Ke,{onClose:this.handleClose,variant:"success",className:u.margin,message:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u043d\u0435\u0441\u0435\u043d\u0430 \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445."})):null,n?r.a.createElement(S,null):r.a.createElement($e,{id:"payments",method:"post",action:"",onSubmit:this.handleSubmit},r.a.createElement(Ze,{name:"selected-renter",onChange:this.selectRenter},r.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:l},""===l?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u0430":m.renters.find(function(e){return e.id===l}).short_name),m.renters.map(function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.short_name)})),""!==l?r.a.createElement(Ze,{name:"selected-contract",onChange:this.selectContract,style:{top:"90px"}},r.a.createElement("option",{selected:!0,hidden:o,value:o},""===o?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440":m.contracts.find(function(e){return e.id===o}).number),m.contracts.map(function(e,t){return r.a.createElement("option",{key:t,name:"selected-contract",value:e.id},e.number," \u043e\u0442 ",e.datetime)})):null,""!==l&&""!==o&&0!=m.invoices.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{variant:"subtitle2",style:{textAlign:"left"}},"\u041e\u0431\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443:",r.a.createElement("span",{className:"ml5",style:m.contracts.find(function(e){return e.id==o}).balance<0?{color:"red"}:{color:"green"}},parseFloat(m.contracts.find(function(e){return e.id==o}).balance).toFixed(2)," \u20bd")),r.a.createElement(ke.a,{variant:"subtitle2",style:{textAlign:"left"}},"\u041e\u0431\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u0430:",r.a.createElement("span",{className:"ml5",style:m.renters.find(function(e){return e.id==l}).balance<0?{color:"red"}:{color:"green"}},parseFloat(m.renters.find(function(e){return e.id==l}).balance).toFixed(2)," \u20bd")),r.a.createElement("p",null,r.a.createElement("b",null,"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430")),r.a.createElement(et,null,r.a.createElement("label",{htmlFor:"sum"},"\u0421\u0443\u043c\u043c\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"),r.a.createElement("input",{type:"text",id:"sum",name:"summa",onChange:function(t){return e.setState({summa:t.target.value})}})),r.a.createElement(et,null,r.a.createElement("label",{htmlFor:"date"},"\u0414\u0430\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"),r.a.createElement("input",{type:"date",id:"date",name:"date",value:a,onChange:function(t){return e.setState({date:t.target.value})}})),r.a.createElement(et,null,r.a.createElement("label",{htmlFor:"number"},"\u041d\u043e\u043c\u0435\u0440 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"),r.a.createElement("input",{type:"text",id:"number",name:"document_number",onChange:function(t){return e.setState({number:t.target.value})}})),r.a.createElement("hr",{style:{marginTop:"40px"}}),r.a.createElement("button",{type:"submit",className:"btn"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")):null),this.state.modal?r.a.createElement(H,{text:this.state.modalText,visible:this.state.modal,toggleModal:this.toggleModal}):null)}}]),t}(n.Component),Ze=E.a.select(Je()),$e=E.a.form(Xe()),et=E.a.div(Ge()),tt=Object(x.b)(function(e){return{testStore:e}},function(e){return{getRenters:function(t){e({type:"FETCH_ALL_RENTERS",payload:t})},getContracts:function(t){e({type:"FETCH_SINGLE_CONTRACT",payload:t})},getInvoices:function(t){e({type:"FETCH_INVOICES_BY_ID",payload:t})},clearContracts:function(){return e({type:"CLEAR_CONTRACTS"})},clearInvoices:function(){return e({type:"CLEAR_INVOICES"})}}})(Object(We.withStyles)(function(e){var t;return{margin:(t={margin:e.spacing.unit,position:"fixed",left:20},Object(ve.a)(t,"margin","auto"),Object(ve.a)(t,"width","fit-content"),Object(ve.a)(t,"bottom",20),Object(ve.a)(t,"zIndex",50),Object(ve.a)(t,"maxWidth",600),t)}})(Qe)),at=a(46),nt=a.n(at),rt=a(47),lt=a.n(rt),ot=a(45),ct=a.n(ot),it=a(50),st=a.n(it),ut=a(35),mt=a.n(ut),dt=a(31),pt=a.n(dt),ht=a(87),ft=a.n(ht),gt=a(65),bt=a.n(gt),Et=a(33),vt=a.n(Et),yt=a(41),wt=a.n(yt),kt=a(40),Ot=a.n(kt),Ct=a(39),xt=a.n(Ct),jt=Object(We.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:16}}})(ct.a),_t=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).fetchBalances=function(){fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/balance/read.php")).then(function(e){return e.json()}).then(function(e){a.setState({balances:e,allContracts:a.filterProp("contract",e),allRenters:a.filterProp("short_name",e)})}).catch(function(e){return console.log(e)}),setTimeout(function(){var e=a.state.balances;e.forEach(function(e){return e.balance=parseFloat(e.balance)}),a.setState({balances:e})},300)},a.deleteBalanceRecord=function(e,t,n,r,l,o){var c=Object(f.a)(Object(f.a)(a));_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/balance/delete.php"),data:{id:e,renter:t,number:n,ground:r,ground_id:l,summa:o},success:function(e){console.log(e),c.fetchBalances()},error:function(e){console.log(e)}})},a.filterProp=function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var i=o.value;a.includes(i[e])||a.push(i[e])}}catch(s){r=!0,l=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a},a.filterBalances=function(e){a.setState(Object(ve.a)({},e.target.name,e.target.value));var t=a.state.balances.filter(function(t){return t[e.target.name]==e.target.value});a.setState({balances:t})},a.removeFilters=function(){a.setState({short_name:"",contract:"",ground:""}),a.fetchBalances()},a.state={balances:[],short_name:"",contract:"",ground:"",allRenters:[],allContracts:[]},a.handleChange=a.handleChange.bind(Object(f.a)(Object(f.a)(a))),a.filterBalances=a.filterBalances.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchBalances(),setTimeout(function(){var t=e.state.balances;t.forEach(function(e){return e.balance=parseFloat(e.balance)}),e.setState({balances:t})},300)}},{key:"handleChange",value:function(){var e=Object(C.a)(O.a.mark(function e(t){var a=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchBalances();case 2:setTimeout(function(){return a.filterBalances(t)},300);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.balances,l=a.allContracts,o=a.allRenters,c=a.short_name,i=a.contract,s=a.renter;return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt.a,{className:t.root},r.a.createElement(nt.a,{className:t.table},r.a.createElement(st.a,null,r.a.createElement(mt.a,null,r.a.createElement(jt,{style:{padding:"0 20px"}},r.a.createElement(xt.a,{style:{width:"100%"}},r.a.createElement(Ot.a,{htmlFor:"renter",style:{color:"white"}},"\u0410\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440"),r.a.createElement(wt.a,{value:this.state.short_name,onChange:this.handleChange,inputProps:{name:"short_name",id:"renter"}},o.map(function(e,t){return r.a.createElement(vt.a,{key:t,value:e},e)})))),r.a.createElement(jt,{align:"right",style:{padding:"0 20px"}},r.a.createElement(xt.a,{style:{width:"100%"}},r.a.createElement(Ot.a,{htmlFor:"contract",style:{color:"white"}},"\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u044b"),r.a.createElement(wt.a,{value:this.state.contract,onChange:this.handleChange,inputProps:{name:"contract",id:"contract"}},l.map(function(e,t){return r.a.createElement(vt.a,{key:t,value:e},e)})))),r.a.createElement(jt,{align:"right",style:{padding:"0 20px"}},r.a.createElement(xt.a,{style:{width:"100%"}},r.a.createElement(Ot.a,{htmlFor:"action",style:{color:"white"}},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),r.a.createElement(wt.a,{value:this.state.ground,onChange:this.handleChange,inputProps:{name:"ground",id:"action"}},r.a.createElement(vt.a,{value:"\u0441\u0447\u0451\u0442"},"\u0421\u0447\u0451\u0442"),r.a.createElement(vt.a,{value:"\u043e\u043f\u043b\u0430\u0442\u0430"},"\u041e\u043f\u043b\u0430\u0442\u0430")))),r.a.createElement(jt,{align:"right"},"\u0421\u0443\u043c\u043c\u0430"),r.a.createElement(jt,{align:"right"},"\u0414\u0430\u0442\u0430"),r.a.createElement(jt,{align:"right"},"\u0421\u0442\u0430\u0440\u0442 \u0430\u0440\u0435\u043d\u0434\u044b"),r.a.createElement(jt,{align:"right"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441"),r.a.createElement(jt,null))),r.a.createElement(lt.a,null,n.map(function(a){return r.a.createElement(mt.a,{className:"\u043e\u043f\u043b\u0430\u0442\u0430"===a.ground?t.payment:t.row,key:a.id},r.a.createElement(jt,{component:"th",scope:"row",className:t.bold},a.short_name),r.a.createElement(jt,{align:"right"},a.contract),r.a.createElement(jt,{align:"right"},a.ground),r.a.createElement(jt,{align:"right"},Number(a.summa).toFixed(2)," \u20bd "),r.a.createElement(jt,{align:"right"},a.date.split("-").reverse().join(".")),r.a.createElement(jt,{align:"right"},a.start_arenda),r.a.createElement(jt,{align:"right",className:a.balance<0?t.warning:t.success},Number(a.balance).toFixed(2)," \u20bd"),"\u0441\u0447\u0451\u0442"===a.ground?r.a.createElement(bt.a,{disableFocusListener:!0,placement:"right",disableTouchListener:!0,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(jt,{className:t.delete,onClick:function(){e.deleteBalanceRecord(a.id,a.short_name,a.contract,a.ground,a.ground_id,a.summa)}},r.a.createElement(ft.a,null))):r.a.createElement(jt,null))})))),s||i||c?r.a.createElement(U.a,{variant:"contained",onClick:this.removeFilters,className:t.button},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"):null)}}]),t}(r.a.Component),St=Object(We.withStyles)(function(e){return{root:{width:"90%",marginTop:"50px",overflowX:"auto",margin:"0 auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},delete:{"&:hover":{cursor:"pointer",background:"#ffebee",transition:".37s ease"}},button:{background:"#000 !important",color:"#fff !important",width:"300px",display:"flex",margin:"30px auto","&:hover":{background:"#232323"}},success:{color:"green"},warning:{color:"red"},bold:{fontWeight:"bold"},payment:{background:"#e8f5e9"}}})(_t),Nt=Object(We.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:16}}})(ct.a),Tt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={renters:[]},a.componentDidMount=function(){a.fetchBalances()},a.fetchBalances=function(){fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/renters/read.php")).then(function(e){return e.json()}).then(function(e){return a.setState({renters:e})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.renters;return r.a.createElement(pt.a,{className:e.root},r.a.createElement(nt.a,{className:e.table},r.a.createElement(mt.a,null,r.a.createElement(Nt,null,"\u0410\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440"),r.a.createElement(Nt,{align:"right"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(Nt,{align:"right"},"\u041f\u0430\u0440\u043e\u043b\u044c")),r.a.createElement(lt.a,null,t.map(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,{className:e.row,key:t.id},r.a.createElement(Nt,{component:"th",scope:"row",className:e.bold},t.short_name),r.a.createElement(Nt,{align:"right"},t.login),r.a.createElement(Nt,{align:"right"},t.password)),r.a.createElement(mt.a,null,r.a.createElement(Nt,null,"\u0410\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440"),r.a.createElement(Nt,{align:"right"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(Nt,{align:"right"},"\u041f\u0430\u0440\u043e\u043b\u044c")))}))))}}]),t}(r.a.Component),Rt=Object(We.withStyles)(function(e){return{root:{width:"70%",marginTop:"50px",overflowX:"auto",margin:"0 auto",maxWidth:"1000px"},table:{minWidth:500},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},success:{color:"green"},warning:{color:"red"},bold:{fontWeight:"bold"}}})(Tt),Ft=a(154),It=a.n(Ft),At=a(155),Dt=a.n(At),Mt=a(103),Pt=a.n(Mt),Bt=a(153),Lt=a.n(Bt),Ht=a(91),Vt=a.n(Ht),Ut={months:[{value:1,label:"\u042f\u043d\u0432\u0430\u0440\u044c"},{value:2,label:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c"},{value:3,label:"\u041c\u0430\u0440\u0442"},{value:4,label:"\u0410\u043f\u0440\u0435\u043b\u044c"},{value:5,label:"\u041c\u0430\u0439"},{value:6,label:"\u0418\u044e\u043d\u044c"},{value:7,label:"\u0418\u044e\u043b\u044c"},{value:8,label:"\u0410\u0432\u0433\u0443\u0441\u0442"},{value:9,label:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c"},{value:10,label:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c"},{value:11,label:"\u041d\u043e\u044f\u0431\u0440\u044c"},{value:12,label:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c"}],types:[{value:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f"},{value:"\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435",label:"\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435"},{value:"\u0412\u043e\u0434\u0430",label:"\u0412\u043e\u0434\u0430"}],years:[{value:2017,label:2017},{value:2018,label:2018},{value:2019,label:2019},{value:2020,label:2020},{value:2021,label:2021},{value:2022,label:2022}]},Yt=a(148),zt=a.n(Yt),Wt=a(149),Gt=a.n(Wt),Xt=a(150),Jt=a.n(Xt),qt=a(147),Kt=a.n(qt);function Qt(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  button {\n    background: #232323;\n    color: #fff;\n    margin-top: 10px;\n    &:hover {\n      background: black;\n    }\n  }\n"]);return Qt=function(){return e},e}function Zt(){var e=Object(g.a)(["\n  input {\n    border: none !important;\n    width: 350px !important;\n  }\n"]);return Zt=function(){return e},e}var $t={success:Ce.a,warning:ze.a,error:je.a,info:Se.a};var ea=Object(We.withStyles)(function(e){return{success:{backgroundColor:Fe.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,l=e.onClose,o=e.variant,c=Object(ye.a)(e,["classes","className","message","onClose","variant"]),i=$t[o];return r.a.createElement(Ue.a,Object.assign({className:Be()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(i,{className:Be()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Me.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:l},r.a.createElement(Te.a,{className:t.icon}))]},c))}),ta=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={year:"",month:"",type:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u044f",amount:"",summa:"",summaError:!1,amountError:!1,open:!1},a.componentDidMount=function(){var e=new Date;a.setState({year:e.getFullYear(),month:e.getMonth()+1})},a.handleChange=function(e){return function(t){var n;a.setState((n={},Object(ve.a)(n,e,t.target.value),Object(ve.a)(n,"summaError",!1),Object(ve.a)(n,"amountError",!1),n))}},a.createSelect=function(e,t,n){var l=a.props.classes;return r.a.createElement(Vt.a,{id:e,name:e,select:!0,label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 ".concat(t),className:l.textField,value:a.state[e],onChange:a.handleChange(e),SelectProps:{MenuProps:{className:l.menu}},margin:"normal"},n.map(function(e){return r.a.createElement(vt.a,{key:e.value,value:e.value},e.label)}))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.year,r=t.month,l=t.type,o=t.amount,c=t.summa,i=Object(f.a)(Object(f.a)(a));o&&c?_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/communal/write.php"),data:{year:n,month:r,type:l,amount:o,summa:c},success:function(e){console.log(e),1===e.result&&(i.setState({open:!0,amount:"",summa:""}),_()("#comunal").trigger("reset"))},error:function(e){console.log(e)}}):(c||a.setState({summaError:!0}),o||a.setState({amountError:!0}))},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({open:!1,success:!1,warning:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(pt.a,{className:e.wrapper},r.a.createElement(zt.a,{className:e.card},r.a.createElement(Gt.a,{className:e.content},r.a.createElement(na,{id:"comunal",className:e.container,noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit},this.createSelect("year","\u0433\u043e\u0434",Ut.years),this.createSelect("month","\u043c\u0435\u0441\u044f\u0446",Ut.months),this.createSelect("type","\u0442\u0438\u043f",Ut.types),r.a.createElement(aa,null,r.a.createElement(Vt.a,{id:"summa",label:"\u0421\u0443\u043c\u043c\u0430",error:this.state.summaError,value:this.state.summa,onChange:this.handleChange("summa"),helperText:this.state.summaError?"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443":"",type:"number",required:!0,className:e.textField,InputLabelProps:{shrink:!0},margin:"normal"})),r.a.createElement(aa,null,r.a.createElement(Vt.a,{id:"amount",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",required:!0,error:this.state.amountError,value:this.state.amount,onChange:this.handleChange("amount"),helperText:this.state.amountError?"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e":"",type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal"})),r.a.createElement(U.a,{type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),this.state.open?r.a.createElement(He.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:5e3,onClose:this.handleClose},r.a.createElement(ea,{onClose:this.handleClose,variant:"success",className:e.margin,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e! \u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043d\u0435\u0441\u0435\u043d\u044b \u0432 \u0411\u0430\u0437\u0443 \u0414\u0430\u043d\u043d\u044b\u0445"})):null),r.a.createElement(Jt.a,{className:e.cover,image:Kt.a})))}}]),t}(n.Component),aa=E.a.div(Zt()),na=E.a.form(Qt()),ra=Object(We.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},wrapper:{padding:60},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:350},menu:{width:350},card:{width:900,height:"90%",margin:"auto",display:"flex"},content:{flex:"1 0 auto"},cover:{width:480}}})(ta),la=(a(338),a(151)),oa=a.n(la),ca=a(152),ia=a.n(ca);function sa(){var e=Object(g.a)(["\n  svg {\n    color: #fafafa !important;\n  }\n"]);return sa=function(){return e},e}function ua(){var e=Object(g.a)(["\n  cursor: pointer;\n  opacity: .85;\n\n  &:hover {\n    opacity: 1;\n    transition: .37s ease;\n  }\n"]);return ua=function(){return e},e}var ma=Object(We.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:16}}})(ct.a),da=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.fetchServices()},a.filterServices=function(e){a.setState(Object(ve.a)({},e.target.name,e.target.value));var t=a.state.services;if(""===e.target.value)a.fetchServices();else{var n=t.filter(function(t){return t[e.target.name]==e.target.value});a.setState({services:n})}},a.clearFilters=function(){a.setState({type:"",year:"",month:""}),a.fetchServices()},a.state={services:[],type:"",month:"",year:"",allTypes:Ut.types,allYears:Ut.years,allMonths:Ut.months,loading:!0},a.handleChange=a.handleChange.bind(Object(f.a)(Object(f.a)(a))),a.fetchServices=a.fetchServices.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(){var e=Object(C.a)(O.a.mark(function e(t){var a=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({loading:!0});case 2:return e.next=4,this.fetchServices();case 4:return e.next=6,setTimeout(function(){return a.filterServices(t)},0);case 6:return e.next=8,this.setState({loading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchServices",value:function(){var e=Object(C.a)(O.a.mark(function e(){var t=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/communal/read.php")).then(function(e){return e.json()}).then(function(e){return t.setState({services:e})}).catch(function(e){return console.log(e)});case 2:return e.next=4,this.setState({loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(C.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,this.setState({loading:!0}),e.next=4,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/communal/delete.php"),type:"POST",data:{id:t},success:function(e){console.log(e)},error:function(e){console.log(e)}});case 4:return e.next=6,void a.fetchServices();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.services,l=a.allTypes,o=a.allMonths,c=a.allYears,i=new N;return r.a.createElement(pt.a,{className:t.root},this.state.loading?r.a.createElement(S,null):r.a.createElement(nt.a,{className:t.table},r.a.createElement(st.a,{className:t.row},r.a.createElement(mt.a,null,r.a.createElement(ma,null,r.a.createElement(ha,null,r.a.createElement(xt.a,{style:{width:"100%"}},r.a.createElement(Ot.a,{htmlFor:"type",style:{color:"white"}},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438"),r.a.createElement(wt.a,{style:{color:"white",textAlign:"left"},value:this.state.type,onChange:this.handleChange,inputProps:{name:"type",id:"type"}},r.a.createElement(vt.a,{value:""},"\u0412\u0441\u0435 \u0442\u0438\u043f\u044b"),l.map(function(e,t){return r.a.createElement(vt.a,{key:t,value:e.value},e.label)}))))),r.a.createElement(ma,{align:"right"},r.a.createElement(ha,null,r.a.createElement(xt.a,{style:{width:"100%"}},r.a.createElement(Ot.a,{htmlFor:"month",style:{color:"white"}},"\u041c\u0435\u0441\u044f\u0446"),r.a.createElement(wt.a,{style:{color:"#fafafa",textAlign:"left"},value:this.state.month,onChange:this.handleChange,inputProps:{name:"month",id:"month"}},r.a.createElement(vt.a,{value:""},"\u0412\u0441\u0435 \u043c\u0435\u0441\u044f\u0446\u0430"),o.map(function(e,t){return r.a.createElement(vt.a,{key:t,value:e.value},e.label)}))))),r.a.createElement(ma,{align:"right"},r.a.createElement(ha,null,r.a.createElement(xt.a,{style:{width:"100%"}},r.a.createElement(Ot.a,{htmlFor:"year",style:{color:"white"}},"\u0413\u043e\u0434"),r.a.createElement(wt.a,{style:{color:"white",textAlign:"left"},value:this.state.year,onChange:this.handleChange,inputProps:{name:"year",id:"year"}},r.a.createElement(vt.a,{value:""},"\u0412\u0441\u0435 \u0433\u043e\u0434\u0430"),c.map(function(e,t){return r.a.createElement(vt.a,{key:t,value:e.value},e.label)}))))),r.a.createElement(ma,{align:"right"},"\u0421\u0443\u043c\u043c\u0430"),r.a.createElement(ma,{align:"right"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement(ma,{align:"center"}))),r.a.createElement(lt.a,null,n.map(function(a){return r.a.createElement(mt.a,{className:t.row,key:a.id},r.a.createElement(ma,{component:"th",scope:"row",className:t.bold},a.type),r.a.createElement(ma,{align:"right"},i.getStringOfMonth(a.month)),r.a.createElement(ma,{align:"right"},a.year),r.a.createElement(ma,{align:"right"},i.toPrice(a.summa)),r.a.createElement(ma,{align:"right"},i.toPrice(a.amount)),r.a.createElement(ma,{align:"center"},r.a.createElement(bt.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(pa,null,r.a.createElement(ft.a,{onClick:function(){return e.handleDelete(a.id)}})))))}))),r.a.createElement(bt.a,{title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b","aria-label":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"},r.a.createElement(oa.a,{color:"primary",className:t.absolute,onClick:this.clearFilters},r.a.createElement(ia.a,null))))}}]),t}(r.a.Component),pa=E.a.div(ua()),ha=E.a.div(sa()),fa=Object(We.withStyles)(function(e){return{root:{width:"100%",overflowX:"auto",margin:"0 auto"},table:{minWidth:500},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},absolute:{position:"fixed",bottom:2*e.spacing.unit,right:3*e.spacing.unit},success:{color:"green"},warning:{color:"red"},bold:{fontWeight:"bold"}}})(da);function ga(e){return r.a.createElement(Lt.a,Object.assign({component:"a",onClick:function(e){return e.preventDefault()}},e))}var ba=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return r.a.createElement(Pt.a,null,r.a.createElement("div",{className:e.root},r.a.createElement(It.a,{position:"static",style:{background:"#232323"}},r.a.createElement(Dt.a,{variant:"fullWidth",value:t,onChange:this.handleChange},r.a.createElement(ga,{label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",href:"page1",className:e.link}),r.a.createElement(ga,{label:"\u0421\u0432\u043e\u0434\u043a\u0430",href:"page2",className:e.link}))),r.a.createElement(pt.a,null,1===t?r.a.createElement(fa,null):r.a.createElement(ra,null))))}}]),t}(r.a.Component),Ea=Object(We.withStyles)(function(e){return{root:{flexGrow:1,width:"70%",margin:"50px auto",backgroundColor:e.palette.background.paper},link:{"&:hover":{textDecoration:"none"}}}})(ba),va=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChangeUrl=function(e){return a.setState({url:e})},a.switchComponent=function(){switch(a.state.url){case"":return r.a.createElement(St,null);case"reestr":return r.a.createElement(L,null);case"bills":return r.a.createElement(ae,null);case"print":return r.a.createElement(Ee,null);case"payments":return r.a.createElement(tt,null);case"history":return r.a.createElement(St,null);case"stats":return r.a.createElement(Ea,null);case"data":return r.a.createElement(Rt,null);default:console.log("default")}},a.state={url:window.location.pathname.slice(1)},a.handleChangeUrl=a.handleChangeUrl.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.url;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{url:e,handleChangeUrl:this.handleChangeUrl}),this.switchComponent())}}]),t}(n.Component),ya=(a(352),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={login:"",password:"",modal:!1,modalText:"",error:!1},a.handleChange=function(e){var t;return a.setState((t={},Object(ve.a)(t,e.target.name,e.target.value),Object(ve.a)(t,"error",!1),t))},a.openModal=function(e){return a.setState({modal:!0,modalText:e})},a.toggleModal=function(){return a.setState({modal:!1,modalText:""})},a.handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(Object(f.a)(a)),n=a.state,r=n.login,l={password:n.password,login:r};l.password&&l.login?_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/user/login.php"),data:l,success:function(e){1===e.result?((new N).setCookie("user_id",e.id,10),window.location.href="/"):t.setState({error:!0});t.setState({login:"",password:""}),_()("#authorization").trigger("reset")},error:function(e){console.log(e)}}):t.openModal("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid"},r.a.createElement("div",{id:"login"},r.a.createElement("h2",null,r.a.createElement("span",{className:"fontawesome-lock"}),"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement("form",{action:"",method:"POST",id:"authorization",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("fieldset",null,r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"login"},"\u041b\u043e\u0433\u0438\u043d")),r.a.createElement("p",null,r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"form-input",name:"login",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043b\u043e\u0433\u0438\u043d"})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c")),r.a.createElement("p",null,r.a.createElement("input",{onChange:this.handleChange,type:"password",className:"form-input",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"\u0412\u043e\u0439\u0442\u0438",id:"submit"})))))),this.state.error?r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"error-msg"},r.a.createElement("img",{src:"/img/warning_white_48x48.png",alt:""}),r.a.createElement("div",{className:"error-msg-text"},r.a.createElement("p",null,r.a.createElement("strong",null,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043f\u0430\u0440\u0430 \u043b\u043e\u0433\u0438\u043d-\u043f\u0430\u0440\u043e\u043b\u044c! \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c")),r.a.createElement("p",null,"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443 \u0432\u0430\u0441 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u0434\u0440\u0443\u0433\u0430\u044f \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b \u0438\u043b\u0438 \u043d\u0430\u0436\u0430\u0442\u0430 \u043a\u043b\u0430\u0432\u0438\u0448\u0430 'Caps Lock'.",r.a.createElement("br",null),"\u041f\u043e\u043f\u0440\u043e\u0431\u0435\u0439\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0435\u0449\u0451 \u0440\u0430\u0437.")))):null,this.state.modal?r.a.createElement(H,{text:this.state.modalText,visible:this.state.modal,toggleModal:this.toggleModal}):null)}}]),t}(n.Component)),wa=(a(354),Object(We.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:16}}})(ct.a)),ka=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).deleteBalanceRecord=function(e,t,n,r,l,o){var c=Object(f.a)(Object(f.a)(a));_.a.ajax({type:"POST",url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/balance/delete.php"),data:{id:e,renter:t,number:n,ground:r,ground_id:l,summa:o},success:function(e){console.log(e),c.fetchBalances()},error:function(e){console.log(e)}})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){var t=e.props.balances;t.forEach(function(e){return e.balance=parseFloat(e.balance)}),e.setState({balances:t})},300)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.balances;return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt.a,{className:t.root},r.a.createElement(nt.a,{className:t.table},r.a.createElement(st.a,null,r.a.createElement(mt.a,null,r.a.createElement(wa,{align:"right",style:{padding:"0 20px"}},"\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u044b"),r.a.createElement(wa,{align:"right",style:{padding:"0 20px"}},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),r.a.createElement(wa,{align:"right"},"\u0421\u0443\u043c\u043c\u0430"),r.a.createElement(wa,{align:"right"},"\u041e\u0441\u0442\u0430\u0442\u043e\u043a"),r.a.createElement(wa,{align:"right"},"\u0414\u0430\u0442\u0430"),r.a.createElement(wa,{align:"right"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441"))),r.a.createElement(lt.a,null,a.map(function(e){return r.a.createElement(mt.a,{className:"\u043e\u043f\u043b\u0430\u0442\u0430"===e.ground?t.payment:t.row,key:e.id},r.a.createElement(wa,{align:"right"},e.contract),r.a.createElement(wa,{align:"right"},e.ground),r.a.createElement(wa,{align:"right"},Number(e.summa.replace(/,/g,".")).toFixed(2)," \u20bd "),r.a.createElement(wa,{align:"right"},e.rest?"".concat(e.rest," \u20bd"):"","  "),r.a.createElement(wa,{align:"right"},e.date),r.a.createElement(wa,{align:"right",className:e.balance<0?t.warning:t.success},Number(e.balance).toFixed(2)," \u20bd"))})))))}}]),t}(r.a.Component),Oa=Object(We.withStyles)(function(e){return{root:{width:"70%",marginTop:"50px",overflowX:"auto",margin:"0 auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},delete:{"&:hover":{cursor:"pointer",background:"#ffebee",transition:".37s ease"}},button:{background:"#000 !important",color:"#fff !important",width:"300px",display:"flex",margin:"30px auto","&:hover":{background:"#232323"}},success:{color:"green"},warning:{color:"red"},bold:{fontWeight:"bold"},payment:{background:"#e8f5e9"}}})(ka);function Ca(){var e=Object(g.a)(["\n  color: #fff;\n  background: #232323;\n  border: 0;\n  padding: 10px 20px;\n  border-radius: 10px;\n"]);return Ca=function(){return e},e}function xa(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  span {\n    margin-bottom: 5px;\n  }\n"]);return xa=function(){return e},e}var ja=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChangeContract=function(e){return a.setState({contract:e.target.value})},a.onChange=function(e){return a.setState({date:e})},a.togglePeni=function(e){return _()(e.target).siblings(".peni-details").slideToggle()},a.toggleInvoice=function(e){return _()(e.target).siblings(".invoice-details").slideToggle()},a.dayOfMonth=function(){return(new Date).getDate()},a.isFirst=function(e,t,a){var n=e.split(".").reverse(),r=t.split("-");return n[1]===r[1]&&n[0]===r[0]?parseInt(n[2])+parseInt(a):5},a.recountBalance=function(e,t,a,n,r,l){setTimeout(function(){document.getElementById("balance").innerText=" "+((parseFloat(e)+parseFloat("0"===l?a:t)-parseFloat(n))*r).toFixed(2)+"\u20bd"},0)},a.state={loading:!0,contract:"",date:[new Date,new Date],hidden:!1,table:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(O.a.mark(function e(){var t,a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),t=this,a=new N,n=a.getCookie("user_id"),e.next=6,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/renters/read_one.php"),data:{id:n},type:"POST",success:function(e){t.props.getRenter(e)},error:function(e){console.log(e)}});case 6:return e.next=8,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/contract/read_one.php"),data:{id:n},type:"POST",success:function(e){t.props.getContracts(e)},error:function(e){console.log(e)}});case 8:return e.next=10,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/invoice/read_by_renter_fullname.php"),data:{fullname:t.props.testStore.renters[0].full_name},type:"POST",success:function(e){t.props.getInvoices(e)},error:function(e){console.log(e)}});case 10:return e.next=12,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/peni/read_by_renter.php"),data:{shortname:t.props.testStore.renters[0].short_name},type:"POST",success:function(e){t.props.getPeni(e)},error:function(e){console.log(e)}});case 12:return e.next=14,_.a.ajax({url:"".concat("localhost"===window.location.hostname?"http://arenda.local":window.location.origin,"/api/balance/read_by_id.php"),data:{id:n},type:"POST",success:function(e){t.props.getBalances(e)},error:function(e){console.log(e)}});case 14:return e.next=16,this.setState({loading:!1});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.state,n=a.loading,l=a.hidden,o=this.props.testStore.renters[0],c=this.props.testStore;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(S,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null),r.a.createElement("div",{className:"container",style:{width:"700px "}},r.a.createElement("div",null,r.a.createElement("h3",{style:{marginBottom:"0"}},o.full_name),r.a.createElement("p",{style:{marginTop:"0"}},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441:",r.a.createElement("span",{id:"balance",style:o.balance>=0?{color:"green"}:{color:"red"}},"".concat(o.balance," \u20bd")))),r.a.createElement("div",{style:{marginTop:"40px "}},r.a.createElement(_a,null,r.a.createElement("b",null,"\u2116 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430"),r.a.createElement("b",null,"\u0417\u0430 \u043f\u0435\u0440\u0438\u043e\u0434")),r.a.createElement("hr",null),c.contracts.map(function(e,t){return r.a.createElement(_a,{key:t},r.a.createElement("span",null,r.a.createElement("b",null,e.number," ")),r.a.createElement("span",null,e.start_date," - ",e.end_date))})),c.peni.length>0&&!l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"error-msg",style:{position:"relative",marginTop:"40px"}},r.a.createElement("img",{src:"/img/warning_white_48x48.png",alt:""}),r.a.createElement("div",{className:"error-msg-text"},r.a.createElement("p",null,r.a.createElement("strong",null,"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!")),r.a.createElement("p",null,"\u0423 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043d\u0435\u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u044b\u0435 \u043f\u0435\u043d\u0438. ",r.a.createElement("br",null)," \u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u043f\u043e\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u043d\u0430 \u0441\u0447\u0451\u0442, \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u044b\u0435 \u043f\u0435\u043d\u0438.")),r.a.createElement("div",{className:"close",onClick:function(){return t.setState({hidden:!0})}})),r.a.createElement("div",{style:{marginTop:"40px "}},r.a.createElement(_a,null,r.a.createElement("b",null,"\u0412\u0441\u0435 \u043f\u0435\u043d\u0438")),r.a.createElement("hr",null),c.peni.map(function(e,a){return r.a.createElement(_a,{key:a},r.a.createElement("div",{style:{width:"100%"},onClick:t.togglePeni},r.a.createElement("p",{className:"renters-list-link toggle"},"\u041f\u0435\u043d\u0438 \u2116: ",e.peni_invoice," \u0437\u0430 ",e.month,", ",e.year,", \u043d\u0430 \u0441\u0443\u043c\u043c\u0443: ",e.peni," (\u043f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0430 \u043d\u0430: ",e.delay," \u0434\u043d\u0435\u0439)"),r.a.createElement("hr",null),r.a.createElement("div",{className:"peni-details",style:{display:"none"},"data-block":e.renter_id},r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.peni_invoice,"&ind=sch&pr=0&disc=0&peni=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0410\u043a\u0442"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.peni_invoice,"&ind=akt&pr=0&disc=0&peni=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.peni_invoice,"&ind=sf&pr=0&disc=0&peni=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.peni_invoice,"&ind=sch&pr=1&disc=0&peni=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0410\u043a\u0442+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.peni_invoice,"&ind=akt&pr=1&disc=0&peni=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.peni_invoice,"}&ind=sf&pr=1&disc=0&peni=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")))))}))):null,r.a.createElement("div",{style:{marginTop:"40px"}},r.a.createElement("b",null,"\u0412\u0441\u0435 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u0447\u0435\u0442\u0430"),c.invoices.map(function(e,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{onClick:t.toggleInvoice},r.a.createElement("p",{className:"toggle",style:{marginTop:"30px",marginBottom:"0"}},"\u2116 \u0441\u0447\u0451\u0442\u0430: ",e.invoice_number," \u0437\u0430 ",e.period_month,", ",e.period_year,", \u043d\u0430 \u0441\u0443\u043c\u043c\u0443:",parseFloat(o.balance)+parseFloat(e.summa)>=0&&!parseInt(e.modified)&&t.dayOfMonth()<=t.isFirst(e.start_arenda,e.invoice_date,e.discount_days)||"0"===e.status&&e.summa===e.discount?r.a.createElement("span",{className:"ml5"},"".concat((e.discount*e.amount).toFixed(2)," (\u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439)")," \u20bd"):r.a.createElement("span",{className:"ml5"},e.summa," \u20bd")),r.a.createElement("hr",null),r.a.createElement("div",{className:"invoice-details",style:{display:"none"},"data-block":e.renter_id},parseFloat(o.balance)+parseFloat(e.summa)>=0&&!parseInt(e.modified)&&t.dayOfMonth()<=t.isFirst(e.start_arenda,e.invoice_date,e.discount_days)||"0"===e.status&&e.summa===e.discount?r.a.createElement(r.a.Fragment,null,t.recountBalance(o.balance,e.contract_summa,e.summa,e.discount,e.amount,e.status),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442 \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sch&pr=0&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0410\u043a\u0442 \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=akt&pr=0&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430 \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sf&pr=0&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442+\u043f\u0435\u0447\u0430\u0442\u044c \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sch&pr=1&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0410\u043a\u0442+\u043f\u0435\u0447\u0430\u0442\u044c \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=akt&pr=1&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430+\u043f\u0435\u0447\u0430\u0442\u044c \u0441\u043e \u0441\u043a\u0438\u0434\u043a\u043e\u0439"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sf&pr=1&disc=1"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sch&pr=0&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0410\u043a\u0442"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=akt&pr=0&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sf&pr=0&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sch&pr=1&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0410\u043a\u0442+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=akt&pr=1&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),r.a.createElement(_a,null,r.a.createElement("b",null,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430+\u043f\u0435\u0447\u0430\u0442\u044c"),r.a.createElement("a",{href:"/schet-pechatnaya-forma?num=".concat(e.invoice_number,"&ind=sf&pr=1&disc=0"),target:"_blank",rel:"noopener noreferrer"},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c"))))))}))),r.a.createElement("div",{style:(e={marginTop:"40px ",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},Object(ve.a)(e,"marginTop","-50px"),Object(ve.a)(e,"paddingBottom","150px"),e)},r.a.createElement(U.a,{onClick:function(){return t.setState({table:!t.state.table})},variant:"contained"}," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439"),this.state.table?r.a.createElement(Oa,{balances:c.balances}):null)))}}]),t}(n.Component),_a=E.a.div(xa()),Sa=(E.a.select(Ca()),Object(x.b)(function(e){return{testStore:e}},function(e){return{getRenter:function(t){e({type:"FETCH_SINGLE_RENTER",payload:t})},getContracts:function(t){e({type:"FETCH_CONTRACTS_BY_RENTER",payload:t})},getInvoices:function(t){e({type:"FETCH_INVOICES_BY_RENTER",payload:t})},getPeni:function(t){e({type:"FETCH_PENI_BY_RENTER",payload:t})},getBalances:function(t){e({type:"FETCH_BALANCE_BY_ID",payload:t})}}})(ja)),Na=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{path:"/reestr",component:va}),r.a.createElement(h.a,{path:"/bills",component:va}),r.a.createElement(h.a,{path:"/print",component:va}),r.a.createElement(h.a,{path:"/payments",component:va}),r.a.createElement(h.a,{path:"/history",component:va}),r.a.createElement(h.a,{path:"/data",component:va}),r.a.createElement(h.a,{path:"/login",component:ya}),r.a.createElement(h.a,{path:"/account",component:Sa}),r.a.createElement(va,null)))}}]),t}(n.Component),Ta=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ra(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Fa=a(58),Ia=a(157),Aa=a(30);var Da=Object(Fa.b)({renters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RENTERS":case"FETCH_ALL_RENTERS":return Object(Aa.a)(t.payload);case"FETCH_SINGLE_RENTER":return Object(Ia.a)({},t.payload);default:return e}},contracts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CONTRACTS":case"FETCH_ALL_CONTRACTS":case"FETCH_CONTRACTS_BY_RENTER":case"FETCH_SINGLE_CONTRACT":return Object(Aa.a)(t.payload);case"CLEAR_CONTRACTS":return[];default:return e}},invoices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL_INVOICES":case"DELETE_INVOICE":return Object(Aa.a)(t.payload);case"CLEAR_INVOICES":return[];case"FETCH_INVOICES_BY_RENTER":case"FETCH_INVOICES_BY_ID":return Object(Aa.a)(t.payload);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN":return[t.payload];default:return e}},peni:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PENI_BY_RENTER":return Object(Aa.a)(t.payload);default:return e}},balances:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BALANCE_BY_ID":return Object(Aa.a)(t.payload);default:return e}}}),Ma=Object(Fa.c)(Da,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Ma.subscribe(function(){return console.log("subscribe",Ma.getState())}),o.a.render(r.a.createElement(x.a,{store:Ma},r.a.createElement(Na,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Ta?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ra(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Ra(t,e)})}}()}},[[160,2,1]]]);
//# sourceMappingURL=main.a708dbb5.chunk.js.map