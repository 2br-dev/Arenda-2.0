(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(48)},39:function(e,t,n){},41:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(18),c=n.n(l),o=(n(39),n(4)),i=n(5),s=n(7),u=n(6),m=n(8),p=n(50),d=n(52),h=n(51),b=n(12),E=n(49),f=(n(41),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("header",null,r.a.createElement("input",{type:"checkbox",className:"hamburger",id:"hamburger"}),r.a.createElement("label",{htmlFor:"hamburger",className:"icon"}),r.a.createElement("nav",{role:"navigation"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(E.a,{to:"/reestr",onClick:function(){return e.props.handleChangeUrl("reestr")}},"\u0420\u0435\u0435\u0441\u0442\u0440 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u043e\u0432")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/bills",onClick:function(){return e.props.handleChangeUrl("bills")}},"\u0412\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0447\u0435\u0442\u043e\u0432")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/print",onClick:function(){return e.props.handleChangeUrl("print")}},"\u041f\u0435\u0447\u0430\u0442\u044c \u0441\u0447\u0435\u0442\u043e\u0432")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/payments",onClick:function(){return e.props.handleChangeUrl("payments")}},"\u041e\u043f\u043b\u0430\u0442\u044b")))))}}]),t}(a.Component)),g=n(10),v=n(17),y=n(11),O=n(14),j=n.n(O);function k(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  padding: 0 10px;\n  :hover {\n    background: lightblue;\n    transition: .37s ease;\n  }\n  div {\n    padding: 0 10px;\n  }\n  p {\n    font-size: 14px;\n    pointer-events: none;\n  }\n"]);return k=function(){return e},e}function C(){var e=Object(g.a)(["\n  p {\n    text-align: left;\n    font-size: 12px;\n    line-height: 7px;\n  }\n"]);return C=function(){return e},e}function w(){var e=Object(g.a)(["\n  p {\n    text-align: left;\n    font-size: 14px;\n    line-height: 7px;\n  }\n"]);return w=function(){return e},e}function _(){var e=Object(g.a)(["\n  width: 600px;\n  margin: 0 auto;\n  text-align: center;\n  h2 {\n    font-size: 18px;\n    padding: 10px 0;\n    margin: 0;\n    cursor: pointer;\n    border-bottom: 1px solid #2323;\n    :hover {\n      background: lightblue;\n      transition: .37s ease;\n    }\n  }\n"]);return _=function(){return e},e}var R=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggleRenterDetails=function(e){return j()(e.target).siblings(".renter-details").slideToggle()},n.toggleContractDetails=function(e){return j()(e.target).siblings(".details").slideToggle()},n.state={visible:1},n.getRenters=n.getRenters.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.a.ajax({url:"http://arenda.local/api/renters/read.php",type:"POST",success:function(t){e.props.getRenters(t)},error:function(e){console.log(e)}});var t=new FormData;t.append("visible",this.state.visible),j.a.ajax({url:"http://arenda.local/api/contract/read.php",data:t,processData:!1,contentType:!1,type:"POST",success:function(t){e.props.getContracts(t)},error:function(e){console.log(e)}})}},{key:"getRenters",value:function(e){e.preventDefault();var t=this;1===this.state.visible?this.setState({visible:0}):this.setState({visible:1}),j.a.ajax({url:"http://arenda.local/api/renters/read.php",type:"POST",success:function(e){t.props.getRenters(e)},error:function(e){console.log(e)}});var n=new FormData;n.append("visible",this.state.visible),j.a.ajax({url:"http://arenda.local/api/contract/read.php",data:n,processData:!1,contentType:!1,type:"POST",success:function(e){t.props.getContracts(e)},error:function(e){console.log(e)}})}},{key:"render",value:function(){var e=this,t=this.props.testStore,n=this.state.visible;return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("button",{onClick:this.getRenters,className:"btn",style:{marginBottom:"30px"}},n?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430\u043c\u0438":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435\u0445 \u0430\u0440\u0435\u043d\u0434\u0430\u0442\u043e\u0440\u043e\u0432")),t.renters.map(function(n,a){return r.a.createElement(x,{key:"renter-".concat(a),onClick:e.toggleRenterDetails},r.a.createElement("h2",null,n.short_name," \u2014 \u0411\u0430\u043b\u0430\u043d\u0441:",n.balance>0?r.a.createElement("span",{style:{color:"green"}}," ",n.balance," \u20bd "):r.a.createElement("span",{style:{color:"red"}}," ",n.balance," \u20bd")),r.a.createElement(T,{style:{display:"none"},className:"renter-details"},r.a.createElement("p",null,r.a.createElement("b",null,"\u0418\u041d\u041d:")," ",n.inn," / ",r.a.createElement("b",null,"\u041a\u041f\u041f:")," ",n.kpp),r.a.createElement("p",null,r.a.createElement("b",null,"\u041e\u0413\u0420\u041d/\u041e\u0413\u0420\u041d\u0418\u041f:")," ",n.ogrn),r.a.createElement("p",null,r.a.createElement("b",null,"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441:")," ",n.uridich_address),r.a.createElement("p",null,r.a.createElement("b",null,"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441:")," ",n.post_adress),r.a.createElement("p",null,r.a.createElement("b",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:")," ",n.phone),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail:")," ",n.email),r.a.createElement("p",null,r.a.createElement("b",null,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430:")," ",n.bank_name),r.a.createElement("p",null,r.a.createElement("b",null,"\u0411\u0418\u041a:")," ",n.bank_bik),r.a.createElement("p",null,r.a.createElement("b",null,"\u041a\u043e\u0440. \u0441\u0447\u0435\u0442:")," ",n.bank_ks),r.a.createElement("p",null,r.a.createElement("b",null,"\u0420\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442:")," ",n.bank_rs)),t.contracts.map(function(t,a){if(t.renter_id===n.id)return r.a.createElement(N,{"data-status":t.status,key:"contract-".concat(a)},r.a.createElement(S,{onClick:e.toggleContractDetails},""!==t.end_date?r.a.createElement("p",null,t.number," \u043e\u0442 ",t.datetime):r.a.createElement("p",null,t.number," \u043e\u0442 ",t.datetime," ",r.a.createElement("i",null,"(\u0431\u0435\u0437\u0441\u0440\u043e\u0447\u043d\u043e)")),"0"===t.status?r.a.createElement("span",{style:{color:"red"}},"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0439"):"0.5"===t.status?r.a.createElement("span",{style:{color:"yellow"}},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d \u0434\u043e: ",t.end_date):r.a.createElement("span",{style:{color:"green"}},"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439")),r.a.createElement("div",{style:{display:"none"},className:"details"},r.a.createElement("p",null,r.a.createElement("b",null,"\u041f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435:")," ",t.room_number),r.a.createElement("p",null,r.a.createElement("b",null,"\u041d\u043e\u043c\u0435\u0440 \u043d\u0430 \u0441\u0445\u0435\u043c\u0435:")," ",t.number_scheme),r.a.createElement("p",null,r.a.createElement("b",null,"\u041f\u043b\u043e\u0449\u0430\u0434\u044c:")," ",t.square),r.a.createElement("p",null,r.a.createElement("b",null,"\u0421\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:")," ",t.summa),r.a.createElement("p",null,r.a.createElement("b",null,"\u0421\u0440\u043e\u043a \u0410\u0440\u0435\u043d\u0434\u044b:")," \u0441 ",t.start_date," \u043f\u043e ",t.end_date),r.a.createElement("p",null,r.a.createElement("b",null,"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u043d\u0438:")," ",t.peni),r.a.createElement("p",null,r.a.createElement("b",null,"\u0410\u0440\u0435\u043d\u0434\u0430 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0435\u0442\u0441\u044f \u0441:")," ",t.start_date)))}))}))}}]),t}(a.Component),x=y.a.div(_()),T=y.a.div(w()),N=y.a.div(C()),S=y.a.div(k()),D=Object(v.b)(function(e){return{testStore:e}},function(e){return{getContracts:function(t){e({type:"FETCH_CONTRACTS",payload:t})},getRenters:function(t){e({type:"FETCH_RENTERS",payload:t})},getRooms:function(t){e({type:"FETCH_ROOMS",payload:t})}}})(R);function U(){var e=Object(g.a)(["\n  width: 800px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  input[type='number'] {\n    margin-left: 10px;\n    width: 50px;\n    text-align: center;\n  }\n"]);return U=function(){return e},e}function F(){var e=Object(g.a)(["\n  width: 800px;\n  margin: 0 auto;\n"]);return F=function(){return e},e}function A(){var e=Object(g.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return A=function(){return e},e}function H(){var e=Object(g.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return H=function(){return e},e}function L(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  p {\n    font-weight: bold;\n    margin-right: 15px;\n  }\n"]);return L=function(){return e},e}var P=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).setTodayDate=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://arenda.local/api/contract/read_all.php").then(function(e){return e.json()}).then(function(t){return e.props.getContracts(t)})}},{key:"createRadio",value:function(e){return r.a.createElement("label",{className:"container-radio"},e,r.a.createElement("input",{name:"year",type:"radio",value:e}),r.a.createElement("span",{className:"checkmark"}))}},{key:"createCheckbox",value:function(e,t,n,a,l,c){return r.a.createElement("div",{key:c},r.a.createElement("label",{className:"container-checkbox"},r.a.createElement("b",null,e)," - ",t,r.a.createElement("input",{type:"checkbox",name:"renter","data-sum":n,"data-id":a,value:l}),r.a.createElement("span",{className:"checkmark"})))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(W,null,r.a.createElement("p",{className:"date-error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443:"),r.a.createElement("input",{type:"date",name:"date",value:this.setTodayDate(),id:"date"})),r.a.createElement("hr",null),r.a.createElement(X,{id:"vystavlenie-schetov",method:"POST",action:""},r.a.createElement("div",null,r.a.createElement("p",{className:"error renter-error"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440:")),this.props.testStore.contracts.map(function(t,n){return e.createCheckbox(t.short_name,t.contract_number,t.summa,t.contract_id,t.renter_id,n)})),r.a.createElement("hr",null),r.a.createElement("span",{className:"error year-error"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434:")),r.a.createElement(M,null,this.createRadio("2016"),this.createRadio("2017"),this.createRadio("2018"),this.createRadio("2019"),this.createRadio("2020")),r.a.createElement("hr",null),r.a.createElement("span",{className:"error month-error"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u044f\u0446:")),r.a.createElement(z,null,r.a.createElement("span",null,this.createRadio("\u042f\u043d\u0432\u0430\u0440\u044c"),this.createRadio("\u0424\u0435\u0432\u0440\u0430\u043b\u044c"),this.createRadio("\u041c\u0430\u0440\u0442")),r.a.createElement("span",null,this.createRadio("\u0410\u043f\u0440\u0435\u043b\u044c"),this.createRadio("\u041c\u0430\u0439"),this.createRadio("\u0418\u044e\u043d\u044c")),r.a.createElement("span",null,this.createRadio("\u0418\u044e\u043b\u044c"),this.createRadio("\u0410\u0432\u0433\u0443\u0441\u0442"),this.createRadio("\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c")),r.a.createElement("span",null,this.createRadio("\u041e\u043a\u0442\u044f\u0431\u0440\u044c"),this.createRadio("\u041d\u043e\u044f\u0431\u0440\u044c"),this.createRadio("\u0414\u0435\u043a\u0430\u0431\u0440\u044c"))),r.a.createElement("hr",null),r.a.createElement(B,null,r.a.createElement("label",{className:"container-checkbox"},r.a.createElement("strong",null,"\u041d\u0430\u0447\u0430\u0442\u044c \u043d\u0443\u043c\u0435\u0440\u0430\u0446\u0438\u044e \u0441"),r.a.createElement("input",{type:"checkbox",name:"from_first"}),r.a.createElement("span",{className:"checkmark"})),r.a.createElement("input",{name:"from_first_number",type:"number",value:"1"}))),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn",type:"submit"},"\u0412\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442"))}}]),t}(a.Component),W=y.a.div(L()),M=y.a.div(H()),z=y.a.div(A()),X=y.a.form(F()),B=y.a.div(U()),I=Object(v.b)(function(e){return{testStore:e}},function(e){return{getContracts:function(t){e({type:"FETCH_ALL_CONTRACTS",payload:t})}}})(P),J=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"print")}}]),t}(a.Component),V=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"payments")}}]),t}(a.Component),q=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChangeUrl=function(e){return n.setState({url:e})},n.switchComponent=function(){switch(n.state.url){case"":case"reestr":return r.a.createElement(D,null);case"bills":return r.a.createElement(I,null);case"print":return r.a.createElement(J,null);case"payments":return r.a.createElement(V,null);default:console.log("default")}},n.state={url:""},n.handleChangeUrl=n.handleChangeUrl.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.url;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{url:e,handleChangeUrl:this.handleChangeUrl}),this.switchComponent())}}]),t}(a.Component),Y=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(d.a,null,r.a.createElement(h.a,{path:"/reestr",component:q}),r.a.createElement(h.a,{path:"/bills",component:q}),r.a.createElement(h.a,{path:"/print",component:q}),r.a.createElement(h.a,{path:"/payments",component:q}),r.a.createElement(q,null)))}}]),t}(a.Component),$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var K=n(16),Q=n(13);var Z=Object(K.b)({renters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RENTERS":return Object(Q.a)(t.payload);default:return e}},contracts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CONTRACTS":case"FETCH_ALL_CONTRACTS":return Object(Q.a)(t.payload);default:return e}},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ROOMS":return[].concat(Object(Q.a)(e),[t.payload]);default:return e}}}),ee=Object(K.c)(Z,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());ee.subscribe(function(){return console.log("subscribe",ee.getState())}),c.a.render(r.a.createElement(v.a,{store:ee},r.a.createElement(Y,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");$?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):G(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):G(t,e)})}}()}},[[34,2,1]]]);
//# sourceMappingURL=main.d88f1252.chunk.js.map